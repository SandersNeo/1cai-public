<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NEXUS ETERNITY</title>
    <style>
        body { background: #050505; color: #0f0; font-family: 'Segoe UI', monospace; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        header { border-bottom: 2px solid #0f0; padding-bottom: 20px; margin-bottom: 20px; display: flex; justify-content: space-between; }
        h1 { margin: 0; text-shadow: 0 0 10px #0f0; }
        .status-box { background: #111; border: 1px solid #333; padding: 15px; margin-bottom: 20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .log-window { background: #000; border: 1px solid #0f0; height: 400px; overflow-y: auto; padding: 10px; font-family: 'Courier New'; }
        .entry { margin-bottom: 5px; border-bottom: 1px solid #111; padding-bottom: 2px; animation: fadein 0.5s; }
        @keyframes fadein { from { opacity: 0; } to { opacity: 1; } }
        .metric { font-size: 36px; font-weight: bold; }
        .label { font-size: 12px; color: #888; }
        
        /* Pulse Effect */
        .pulse { width: 10px; height: 10px; background: #0f0; border-radius: 50%; display: inline-block; box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.7); animation: pulse-green 2s infinite; }
        @keyframes pulse-green {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(0, 255, 0, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(0, 255, 0, 0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>NEXUS V1000.0 [ETERNITY]</h1>
                <small>IMMORTAL OBSERVER INTERFACE</small>
            </div>
            <div style="text-align: right;">
                <div class="pulse"></div> SYSTEM ACTIVE<br>
                <small id="connection-status">Connecting...</small>
            </div>
        </header>

        <div class="grid">
            <div>
                <div class="status-box">
                    <div class="label">TOTAL ARTIFACTS SCANNED</div>
                    <div class="metric" id="scan-count">0</div>
                </div>
                <div class="status-box">
                    <div class="label">SYSTEM UPTIME</div>
                    <div class="metric" id="uptime">0s</div>
                </div>
            </div>
            
            <div class="log-window" id="log-feed">
                <div class="entry" style="color: #888;">// Waiting for Neural Uplink...</div>
            </div>
        </div>
    </div>

    <script>
        // DYNAMIC CONFIGURATION
        const PORT = 9999; // This will be auto-updated by NEXUS.cmd
        
        const API_URL = `http://localhost:${PORT}/status`;
        const logFeed = document.getElementById('log-feed');
        let lastEventId = 0;

        async function tick() {
            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                
                document.getElementById('connection-status').innerText = "CONNECTED via PORT " + PORT;
                document.getElementById('connection-status').style.color = "#0f0";
                
                // Update Metrics
                document.getElementById('scan-count').innerText = data.stats.scanned;
                document.getElementById('uptime').innerText = Math.floor(data.uptime) + "s";

                // Update Logs
                data.events.forEach(evt => {
                    if(evt.id > lastEventId) {
                        addLog(`[${evt.type}] Analyzed ${evt.file} (Entropy: ${evt.entropy.toFixed(4)})`);
                        lastEventId = evt.id;
                    }
                });

            } catch (e) {
                document.getElementById('connection-status').innerText = "CONNECTION LOST (Retrying...)";
                document.getElementById('connection-status').style.color = "#f00";
            }
        }

        function addLog(msg) {
            const div = document.createElement('div');
            div.className = 'entry';
            div.innerText = "> " + msg;
            logFeed.prepend(div);
        }

        setInterval(tick, 1000);
    </script>
</body>
</html>

